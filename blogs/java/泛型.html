<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>泛型 | 杜毅柳</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/study-notes/img/favicon.ico">
    <meta name="description" content="一个又菜又爱学的人!">
    
    <link rel="preload" href="/study-notes/assets/css/0.styles.36c7e5c5.css" as="style"><link rel="preload" href="/study-notes/assets/js/app.c0db1946.js" as="script"><link rel="preload" href="/study-notes/assets/js/7.f1e5fbdd.js" as="script"><link rel="preload" href="/study-notes/assets/js/2.a284cb68.js" as="script"><link rel="preload" href="/study-notes/assets/js/15.b4882dc9.js" as="script"><link rel="preload" href="/study-notes/assets/js/3.3315c7c4.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/10.41e3331c.js"><link rel="prefetch" href="/study-notes/assets/js/11.83e3d03d.js"><link rel="prefetch" href="/study-notes/assets/js/12.5cddcc92.js"><link rel="prefetch" href="/study-notes/assets/js/13.a02aae1c.js"><link rel="prefetch" href="/study-notes/assets/js/14.5c8456e7.js"><link rel="prefetch" href="/study-notes/assets/js/16.70cf043a.js"><link rel="prefetch" href="/study-notes/assets/js/17.0b04cbb7.js"><link rel="prefetch" href="/study-notes/assets/js/18.b85f0f48.js"><link rel="prefetch" href="/study-notes/assets/js/19.dc75de6b.js"><link rel="prefetch" href="/study-notes/assets/js/20.13da132c.js"><link rel="prefetch" href="/study-notes/assets/js/21.bedb4ebe.js"><link rel="prefetch" href="/study-notes/assets/js/22.46a16eba.js"><link rel="prefetch" href="/study-notes/assets/js/23.03c4acf1.js"><link rel="prefetch" href="/study-notes/assets/js/4.bf81bdbe.js"><link rel="prefetch" href="/study-notes/assets/js/5.b5843c52.js"><link rel="prefetch" href="/study-notes/assets/js/6.02523e56.js"><link rel="prefetch" href="/study-notes/assets/js/8.2e075c2e.js"><link rel="prefetch" href="/study-notes/assets/js/9.11f4d199.js">
    <link rel="stylesheet" href="/study-notes/assets/css/0.styles.36c7e5c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study-notes/" class="home-link router-link-active"><img src="/study-notes/img/logo.png" alt="杜毅柳" class="logo"> <span class="site-name can-hide">杜毅柳</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study-notes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/blogs/java/java基本语法知识.html" class="nav-link">
  Java基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/java/java进阶/" class="nav-link">
  Java进阶
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SSM" class="dropdown-title"><span class="title">SSM</span> <span class="arrow down"></span></button> <button type="button" aria-label="SSM" class="mobile-dropdown-title"><span class="title">SSM</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Sprig
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/blogs/ssm/spring/start.html" class="nav-link">
  Sprig启动流程
</a></li><li class="dropdown-subitem"><a href="/study-notes/blogs/ssm/spring/config.html" class="nav-link">
  Sprig配置
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/ssm/springmvc/" class="nav-link">
  SpringMVC启动流程
</a></li><li class="dropdown-subitem"><a href="/study-notes/ssm/springmvc/" class="nav-link">
  SpringMVC配置
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/ssm/mybatis/" class="nav-link">
  MyBatis启动流程
</a></li><li class="dropdown-subitem"><a href="/study-notes/ssm/mybatis/" class="nav-link">
  MyBatis配置
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/study-notes/about/" class="nav-link">
  杜毅柳
</a></div><div class="nav-item"><a href="https://www.github.com/hihixixi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study-notes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/blogs/java/java基本语法知识.html" class="nav-link">
  Java基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/java/java进阶/" class="nav-link">
  Java进阶
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SSM" class="dropdown-title"><span class="title">SSM</span> <span class="arrow down"></span></button> <button type="button" aria-label="SSM" class="mobile-dropdown-title"><span class="title">SSM</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Sprig
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/blogs/ssm/spring/start.html" class="nav-link">
  Sprig启动流程
</a></li><li class="dropdown-subitem"><a href="/study-notes/blogs/ssm/spring/config.html" class="nav-link">
  Sprig配置
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/ssm/springmvc/" class="nav-link">
  SpringMVC启动流程
</a></li><li class="dropdown-subitem"><a href="/study-notes/ssm/springmvc/" class="nav-link">
  SpringMVC配置
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-notes/ssm/mybatis/" class="nav-link">
  MyBatis启动流程
</a></li><li class="dropdown-subitem"><a href="/study-notes/ssm/mybatis/" class="nav-link">
  MyBatis配置
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/study-notes/about/" class="nav-link">
  杜毅柳
</a></div><div class="nav-item"><a href="https://www.github.com/hihixixi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study-notes/blogs/java/java基本语法知识.html" class="sidebar-link">java语言基础</a></li><li><a href="/study-notes/blogs/java/类和对象.html" class="sidebar-link">类</a></li><li><a href="/study-notes/blogs/java/注解.html" class="sidebar-link">注解</a></li><li><a href="/study-notes/blogs/java/接口与继承.html" class="sidebar-link">接口</a></li><li><a href="/study-notes/blogs/java/数字与字符串.html" class="sidebar-link">Numbers</a></li><li><a href="/study-notes/blogs/java/泛型.html" class="active sidebar-link">泛型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-notes/blogs/java/泛型.html#泛型类型" class="sidebar-link">泛型类型</a></li><li class="sidebar-sub-header"><a href="/study-notes/blogs/java/泛型.html#通配符" class="sidebar-link">通配符</a></li><li class="sidebar-sub-header"><a href="/study-notes/blogs/java/泛型.html#类型擦除" class="sidebar-link">类型擦除</a></li></ul></li><li><a href="/study-notes/blogs/java/异常.html" class="sidebar-link">什么是异常</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="泛型"><a href="#泛型" class="header-anchor">#</a> 泛型</h1> <h2 id="泛型类型"><a href="#泛型类型" class="header-anchor">#</a> 泛型类型</h2> <p>泛型类型指的是通过类型参数化的泛型类或接口。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> object<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>object <span class="token operator">=</span> object<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> object<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//使用泛型，注意泛型的使用方式</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">T</span> t<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>t <span class="token operator">=</span> t<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过以上代码进行对比:</p> <ul><li>没有使用泛型时，由于Object是顶级父类，你以在调用set或get方法时传入非基本数据类型以外的任何类型。假日你set传入一个String类型，get时却获得了一个Integer类型，这不符合Object的设定，这样也是错误的</li> <li>使用泛型，你可以事先规定T的类型，之后再调用方法时，编译器会对T继续安全检查，如果set和get的参数不一致。编译器会报错这更利于我们检测代码错误</li> <li>注意类型参数和类型化参数，例如Box<T>中的T就是类型参数它并没有明确的指明类型，Box<Integer>中的Integer就是类型化参数，泛型已经有了明确的指定，这只是术语上的区别并不是很重要</Integer></T></li> <li>Box<Integer> box = new Box&lt;&gt;(); new关键字后的&lt;&gt;菱形可以不写类型，这是简化写法，编译器会根据上下文自动推断，也可以前面&lt;&gt;不写类型后面&lt;&gt;写但是编译器会发出警告，所以不推荐使用</Integer></li></ul> <p><em>命名规则</em></p> <p>以下命名只是在使用泛型时，推荐使用以下字母对泛型类型进行命名，并不强制要求</p> <ul><li>E - 元素（被 Java 集合框架广泛使用）</li> <li>K - 键</li> <li>N - 数字</li> <li>T - 类型</li> <li>V - 价值</li> <li>S、U、V 等 - 第 2、第 3、第 4 类型</li></ul> <h3 id="原始类型"><a href="#原始类型" class="header-anchor">#</a> 原始类型</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Box</span> rawBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           
<span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> intBox <span class="token operator">=</span> rawBox<span class="token punctuation">;</span>

<span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Box</span> rawBox <span class="token operator">=</span> stringBox<span class="token punctuation">;</span>
rawBox<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre></div><p>如果没有指定实际的泛型类型，例如 Box box = new Box()，Box被称为Box<T>的原始类型，非泛型类或接口是没有原始类型这一说法的，以上演示的代码编译器均会发出警告，所以不推荐使用原始类型</T></p> <h3 id="边界类型参数"><a href="#边界类型参数" class="header-anchor">#</a> 边界类型参数</h3> <p>你可以在使用泛型时是为实际化参数类型时设置是实际化的边界，例如 public class NaturalNumber<T extends="" Number="">这表明T可以是Number类或其子类，不可以传入String等其它不相关类，这对定制化类的操作很有用</T></p> <h2 id="通配符"><a href="#通配符" class="header-anchor">#</a> 通配符</h2> <p>？被称为通配符，通配符可以用作参数、字段或局部变量类型，不可以用在泛型类的定义等处</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">List</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> 
</code></pre></div><p>这并不是一个泛型方法，但是它传入的参数却可以是Number的子类，这极大的扩展了该方法的使用范围</p> <ul><li>？extends Class ,Class称为上界通配符，即?最高类就是Class</li> <li>？super Class,Class称为下界通配符，即?最低类是Class，不能是其子类</li> <li>List&lt;?&gt; list 称为无界通配符</li> <li>上界和下界只能存在一端，不能同时存在</li> <li>使用通配符还可以在泛型类之间建立起一定的关系</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> 与 <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span>并没有什么关系，但是可以使用通配符使其建立关系
    
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> intList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span>  numList <span class="token operator">=</span> intList<span class="token punctuation">;</span> <span class="token comment">//成功建立关系，上面是下面的子类</span>
</code></pre></div><h2 id="类型擦除"><a href="#类型擦除" class="header-anchor">#</a> 类型擦除</h2> <p>如果泛型类型或泛型方法没有边界，则使用Object代替泛型，如果有边界则使用第一边界代替泛型，类型擦除确保不会为参数化类型创建新类；因此，泛型不会产生运行时开销</p> <p><em>没有边界的泛型类与编译器实际代替生成的类</em></p> <div class="language- extra-class"><pre class="language-text"><code>public class Node&lt;T&gt; {

    private T data;
    private Node&lt;T&gt; next;

    public Node(T data, Node&lt;T&gt; next) {
        this.data = data;
        this.next = next;
    }

    public T getData() { return data; }
    // ...
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>public class Node {

    private Object data;
    private Node next;

    public Node(Object data, Node next) {
        this.data = data;
        this.next = next;
    }

    public Object getData() { return data; }
    // ...
}
</code></pre></div><p><em>有边界泛型类与编译器实际生成的类</em></p> <div class="language- extra-class"><pre class="language-text"><code>public class Node&lt;T extends Comparable&lt;T&gt;&gt; {

    private T data;
    private Node&lt;T&gt; next;

    public Node(T data, Node&lt;T&gt; next) {
        this.data = data;
        this.next = next;
    }

    public T getData() { return data; }
    // ...
}
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Comparable</span> data<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span> next<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span> data<span class="token punctuation">,</span> <span class="token class-name">Node</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Comparable</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="桥接方法"><a href="#桥接方法" class="header-anchor">#</a> 桥接方法</h3> <p>由于编译器的类型擦除，所以编译器隐式的创建桥接方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">T</span> data<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Node.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyNode</span> <span class="token keyword">extends</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">MyNode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyNode.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">MyNode</span> mn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyNode</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Node</span> n <span class="token operator">=</span> mn<span class="token punctuation">;</span>            <span class="token comment">// 编译器发出警告</span>
n<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 直接抛出类型匹配异常</span>
<span class="token class-name">Integer</span> x <span class="token operator">=</span> mn<span class="token punctuation">.</span>data<span class="token punctuation">;</span> 
</code></pre></div><p>为什么一个泛型方法会抛出异常，接着看类型擦除后的代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Node.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyNode</span> <span class="token keyword">extends</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">MyNode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
	
    <span class="token comment">//生成的桥接方法，隐式生成的</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
   
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyNode.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>因为public void setData(Integer data)与public void setData(Object data)方法签名不一致，所以方法不会进行覆盖那么代码不应该报错，但是我们的预期是会发生覆盖并且存在多态性即应该报错才是我们所预期的，为了达到这一目的，编译器隐式创建了桥接方法保留多态性桥接方法实际委托给子类方法，所以会抛出异常</p> <h3 id="泛型限制"><a href="#泛型限制" class="header-anchor">#</a> 泛型限制</h3> <ul><li><p>无法使用原始类型实例化泛型类型，Pair&lt;int, char&gt; p = new Pair&lt;&gt;(8, 'a')   错误</p></li> <li><p>无法创建类型参数的实例，  E elem = new E() 错误</p></li> <li><p>不能声明类型为类型参数的静态字段， private static T t 错误</p></li> <li><p>不能将 Casts 或 instanceof 与参数化类型一起使用</p></li> <li><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">rtti</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token keyword">instanceof</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//错误</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>无法创建参数化类型的数组，ist<Integer>[] arrayOfLists = new List<Integer>[2] 错误</Integer></Integer></p></li> <li><p>无法创建、捕获或抛出参数化类型的异常对象，class MathException<T> extends Exception 错误</T></p></li> <li><p>无法重载每个重载的形式参数类型擦除为相同原始类型的方法，</p></li> <li><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strSet<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> intSet<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token comment">//类型擦除后方法签名完全一致，编译时报错</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">7/19/2022, 4:30:29 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study-notes/blogs/java/数字与字符串.html" class="prev">
        Numbers
      </a></span> <span class="next"><a href="/study-notes/blogs/java/异常.html">
        什么是异常
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/study-notes/assets/js/app.c0db1946.js" defer></script><script src="/study-notes/assets/js/7.f1e5fbdd.js" defer></script><script src="/study-notes/assets/js/2.a284cb68.js" defer></script><script src="/study-notes/assets/js/15.b4882dc9.js" defer></script><script src="/study-notes/assets/js/3.3315c7c4.js" defer></script>
  </body>
</html>
